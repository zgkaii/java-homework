# 作业6

写一段代码，使用 HttpClient 或 OkHttp 访问 [http://localhost:8801 ](http://localhost:8801/)，代码提交到 GitHub。

**HttpServer**：

```java
public class HttpServer {
    public static void main(String[] args) throws IOException {
        ServerSocket serverSocket = new ServerSocket(8800);
        while (true) {
            try {
                Socket socket = serverSocket.accept();
                new Thread(()->{
                    service(socket);
                }).start();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

    private static void service(Socket socket) {
        try {
            PrintWriter printWriter = new PrintWriter(socket.getOutputStream(), true);
            printWriter.println("HTTP/1.1 200 OK");
            printWriter.println("Content-Type:text/html;charset=utf-8");
            String body ="hello,nio2";
            printWriter.println("Content-length:"+body.getBytes().length);
            printWriter.println();
            printWriter.write(body);
            printWriter.close();
            socket.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

**OkHttpClient**：

> https://square.github.io/okhttp/

```java
public class OkHttpClientTest {
    public static void main(String[] args) throws IOException {
        OkHttpClient client = new OkHttpClient();
        String url = "http://localhost:8800";

        Request request = new Request.Builder().url(url).build();
        Response response = client.newCall(request).execute();
        System.out.println(response.body().string());
    }
}
```

**HttpClient**：

> http://hc.apache.org/

```java
public class HttpClientTest {
    public static void main(String[] args) {
        // 创建一个httpClient对象
        CloseableHttpClient httpClient = HttpClients.createDefault();
        // 响应
        CloseableHttpResponse httpResponse = null;
        // 创建Get请求
        HttpGet httpGet = new HttpGet("http://localhost:8800");
        try {
            // 执行get请求得到返回对象
            httpResponse = httpClient.execute(httpGet);
            // 获取响应的状态码
            int status = httpResponse.getStatusLine().getStatusCode();
            // 请求成功
            if (status == HttpStatus.SC_OK) {
                // 通过返回对象获取返回数据
                HttpEntity httpEntity = httpResponse.getEntity();
                if (httpEntity != null) {
                    String content = EntityUtils.toString(httpEntity, "UTF-8");
                    System.out.println("Connection success! Content body:" + content
                            + " Content-length:" + content.getBytes().length);
                }
            }
        } catch (Exception e) {
            System.out.println("Connection failed!");
            e.printStackTrace();
        } finally {
            // 关闭使用的资源
            try {
                if (httpResponse != null) {
                    httpResponse.close();
                }
                if (httpClient != null) {
                    httpClient.close();
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
}
```